.core-caret-root {
    --c-b: oklch(calc(var(--c-l-base) + var(--c-l-dir) * 20%) 0.16 240);
    position: relative;
    width: 0; height: 0;
    margin: 0; padding: 0;
    pointer-events: none;
    user-select: none;
    z-index: 1;
}

@keyframes core-caret-blink {
    0%      {opacity: 1}
    100%    {opacity: 0}
}

.tt-editor:focus .core-caret-root {
    --c-b: oklch(calc(var(--c-l-base) + var(--c-l-dir) * 40%) 0.32 240);
}

.tt-editor:focus .core-caret-root:not(:has(:hover, :active)) {
    animation: .6s cubic-bezier(.65,.05,.36,1) 1.2s infinite alternate core-caret-blink;
}

.core-caret-container,
.core-caret-handle-container {
    position: absolute;
    left: calc(var(--cont-x) * 1px);
    top: calc(var(--cont-y) * 1px);
    width: calc(var(--w) * 1px);
    height: calc(var(--h) * 1px);
}

.core-caret-root.f-show_container .core-caret-container::after {
    content: " ";
    position: absolute;
    inset: 0;
    outline: solid 2px var(--c-b);
    border-radius: var(--border-radius);
}

.core-caret-root.f-show_box .core-caret-box {
    --c-bg: oklch(calc(var(--c-l-base) + var(--c-l-dir) * 40%) 0.16 240 / 40%);
    position: absolute;
    left: calc((var(--box-x) - var(--cont-x)) * 1px);
    top: calc((var(--box-y) - var(--cont-y)) * 1px);
    width: calc(var(--w) * 1px);
    height: calc(var(--h) * 1px);
    background: var(--c-bg);
}

.core-caret-vector-handle {
    --gap: 1px;
    --size: 12px;
    --hint-size: 6px;
    display: none;
    position: absolute;
    width: var(--size);
    height: var(--size);
    transform: translate(-50%, -50%);
    pointer-events: all;
}

.core-caret-vector-handle::after {
    content: " ";
    position: absolute;
    left: 50%;
    top: 50%;
    width: var(--hint-size);
    height: var(--hint-size);
    transform: translate(-50%, -50%);
    background: var(--c-b);
    border-radius: 100%;
}

.core-caret-vector-handle:hover::after,
.core-caret-vector-handle:active::after {
    outline: calc((var(--size) - var(--hint-size)) / 2) solid color-mix(in oklch, var(--c-b) 50%, transparent);
}

.core-caret-root.f-show_handle_top .core-caret-vector-handle.f-top,
.core-caret-root.f-show_handle_bottom .core-caret-vector-handle.f-bottom,
.core-caret-root.f-show_handle_left .core-caret-vector-handle.f-left,
.core-caret-root.f-show_handle_right .core-caret-vector-handle.f-right,
.core-caret-root.f-show_handle_top_left .core-caret-vector-handle.f-top_left,
.core-caret-root.f-show_handle_top_right .core-caret-vector-handle.f-top_right,
.core-caret-root.f-show_handle_bottom_left .core-caret-vector-handle.f-bottom_left,
.core-caret-root.f-show_handle_bottom_right .core-caret-vector-handle.f-bottom_right {
    display: block;
}

.core-caret-root.f-show_handle_top .core-caret-vector-handle.f-top,
.core-caret-root.f-show_handle_top_left .core-caret-vector-handle.f-top_left,
.core-caret-root.f-show_handle_top_right .core-caret-vector-handle.f-top_right {
    top: calc(0% - var(--gap));
}

.core-caret-root.f-show_handle_bottom .core-caret-vector-handle.f-bottom,
.core-caret-root.f-show_handle_bottom_left .core-caret-vector-handle.f-bottom_left,
.core-caret-root.f-show_handle_bottom_right .core-caret-vector-handle.f-bottom_right {
    top: calc(100% + var(--gap));
}

.core-caret-root.f-show_handle_left .core-caret-vector-handle.f-left,
.core-caret-root.f-show_handle_top_left .core-caret-vector-handle.f-top_left,
.core-caret-root.f-show_handle_bottom_left .core-caret-vector-handle.f-bottom_left {
    left: calc(0% - var(--gap));
}

.core-caret-root.f-show_handle_right .core-caret-vector-handle.f-right,
.core-caret-root.f-show_handle_top_right .core-caret-vector-handle.f-top_right,
.core-caret-root.f-show_handle_bottom_right .core-caret-vector-handle.f-bottom_right {
    left: calc(100% + var(--gap));
}

.core-caret-root.f-show_handle_top .core-caret-vector-handle.f-top {
    left: max(50%, calc(100% - var(--size)));
}

.core-caret-root.f-show_handle_bottom .core-caret-vector-handle.f-bottom {
    left: min(50%, var(--size));
}

.core-caret-root.f-show_handle_left .core-caret-vector-handle.f-left {
    top: max(50%, calc(100% - var(--size)));
}

.core-caret-root.f-show_handle_right .core-caret-vector-handle.f-right {
    top: min(50%, var(--size));
}

.core-caret-root.f-show_handle_top_left.f-show_container .core-caret-container::after {
    border-top-left-radius: 0;
}

.core-caret-root.f-show_handle_top_right.f-show_container .core-caret-container::after {
    border-top-right-radius: 0;
}

.core-caret-root.f-show_handle_bottom_left.f-show_container .core-caret-container::after {
    border-bottom-left-radius: 0;
}

.core-caret-root.f-show_handle_bottom_right.f-show_container .core-caret-container::after {
    border-bottom-right-radius: 0;
}